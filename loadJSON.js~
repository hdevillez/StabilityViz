var dataIsLoaded = true;


//Load the graph encoded as a json file
function loadD3(file) {
  if(dataIsLoaded){
    
    dataIsLoaded =false;
    d3.json(file, function(error, data) {
      
      if (error) return alert("error");     
      
      if(graph != null) {
        graph.removeAllNodes();
        graph.removeAllLinks();
      }
      
      graph = new initGraph(svg);
      graph.loadGraph(data);
      
      force
        .nodes(graph.nodes)
        .links(graph.links)
        .start();
    
      refreshGraph(graph);
      

    });
    dataIsLoaded = true;
  }

}

function loadGraph(){

  reinitialization();
  clearBarChart();
  
  file = document.getElementById("graphChoice").value; //Get the name file

  loadD3(file);
};


function loadF() {
  var reader = new FileReader();

  reader.onload = function (e){
    var text = reader.result;
    if(file.files[0].name.match('\.json'))
      console.log(text);
  }
  var file = document.getElementById("fileInput");

  reader.readAsText(file.files[0]);
}

